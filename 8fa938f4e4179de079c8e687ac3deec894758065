{
  "comments": [
    {
      "key": {
        "uuid": "6f5d15c2_518cac73",
        "filename": "main/src/main/java/org/onap/policy/pap/main/comm/PdpMessageGenerator.java",
        "patchSetId": 7
      },
      "lineNbr": 94,
      "author": {
        "id": 3239
      },
      "writtenOn": "2021-02-16T20:02:19Z",
      "side": 1,
      "message": "Do we still need this? \nAs only registration \u0026 state change flow calls this method. And in both cases we need to send all the policies in the subgroup. So essentially remove the if/else and just keep the line 105 \u0026 106.\n\nInfact in that case SessionData is also not needed anymore.",
      "range": {
        "startLine": 94,
        "startChar": 38,
        "endLine": 94,
        "endChar": 54
      },
      "revId": "8fa938f4e4179de079c8e687ac3deec894758065",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "820c0163_4c40ec93",
        "filename": "main/src/main/java/org/onap/policy/pap/main/comm/PdpMessageGenerator.java",
        "patchSetId": 7
      },
      "lineNbr": 94,
      "author": {
        "id": 6722
      },
      "writtenOn": "2021-02-16T20:13:30Z",
      "side": 1,
      "message": "So do I remove these changes?",
      "parentUuid": "6f5d15c2_518cac73",
      "range": {
        "startLine": 94,
        "startChar": 38,
        "endLine": 94,
        "endChar": 54
      },
      "revId": "8fa938f4e4179de079c8e687ac3deec894758065",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f77c6ed_bde83a5f",
        "filename": "main/src/main/java/org/onap/policy/pap/main/comm/PdpMessageGenerator.java",
        "patchSetId": 7
      },
      "lineNbr": 94,
      "author": {
        "id": 3239
      },
      "writtenOn": "2021-02-16T21:26:36Z",
      "side": 1,
      "message": "I am okay with the removal as we don\u0027t need it anymore.",
      "parentUuid": "820c0163_4c40ec93",
      "range": {
        "startLine": 94,
        "startChar": 38,
        "endLine": 94,
        "endChar": 54
      },
      "revId": "8fa938f4e4179de079c8e687ac3deec894758065",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "13259204_dc756cd5",
        "filename": "main/src/main/java/org/onap/policy/pap/main/comm/PdpMessageGenerator.java",
        "patchSetId": 7
      },
      "lineNbr": 94,
      "author": {
        "id": 811
      },
      "writtenOn": "2021-02-16T21:35:44Z",
      "side": 1,
      "message": "yes, it looks like you can remove session data changes.  For register:\n  deploy \u003d full \u003d all\n  undeploy \u003d null\n\nFor heartbeat:\n  full \u003d all\n  deploy \u003d all - (policies that the PDP already has)\n  undeploy \u003d (policies that the PDP already has) - all\n\nLooks like these \"set\" operations should maybe be done by the invoker, in which case, the databaseProvider and register parameters could be removed and the full, deploy, and undeploy sets passed in, instead.",
      "parentUuid": "2f77c6ed_bde83a5f",
      "range": {
        "startLine": 94,
        "startChar": 38,
        "endLine": 94,
        "endChar": 54
      },
      "revId": "8fa938f4e4179de079c8e687ac3deec894758065",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2ef28691_13fa6686",
        "filename": "main/src/main/java/org/onap/policy/pap/main/comm/PdpMessageGenerator.java",
        "patchSetId": 7
      },
      "lineNbr": 94,
      "author": {
        "id": 3239
      },
      "writtenOn": "2021-02-16T22:19:27Z",
      "side": 1,
      "message": "For heartbeat I think:\nundeploy \u003d null",
      "parentUuid": "13259204_dc756cd5",
      "range": {
        "startLine": 94,
        "startChar": 38,
        "endLine": 94,
        "endChar": 54
      },
      "revId": "8fa938f4e4179de079c8e687ac3deec894758065",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1660901b_6be343a3",
        "filename": "main/src/main/java/org/onap/policy/pap/main/comm/PdpMessageGenerator.java",
        "patchSetId": 7
      },
      "lineNbr": 94,
      "author": {
        "id": 3239
      },
      "writtenOn": "2021-02-16T22:22:07Z",
      "side": 1,
      "message": "Ignore my previous comment. I didn\u0027t realize \"-\" as mathematical subtraction ðŸ˜„",
      "parentUuid": "2ef28691_13fa6686",
      "range": {
        "startLine": 94,
        "startChar": 38,
        "endLine": 94,
        "endChar": 54
      },
      "revId": "8fa938f4e4179de079c8e687ac3deec894758065",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "364cf668_9a54adc5",
        "filename": "main/src/main/java/org/onap/policy/pap/main/comm/PdpMessageGenerator.java",
        "patchSetId": 7
      },
      "lineNbr": 105,
      "author": {
        "id": 811
      },
      "writtenOn": "2021-02-16T19:00:52Z",
      "side": 1,
      "message": "only invoke this once and re-use it",
      "range": {
        "startLine": 105,
        "startChar": 43,
        "endLine": 105,
        "endChar": 87
      },
      "revId": "8fa938f4e4179de079c8e687ac3deec894758065",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9707ef5e_424d59cf",
        "filename": "main/src/main/java/org/onap/policy/pap/main/comm/PdpMessageGenerator.java",
        "patchSetId": 7
      },
      "lineNbr": 105,
      "author": {
        "id": 6722
      },
      "writtenOn": "2021-02-16T20:13:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "364cf668_9a54adc5",
      "range": {
        "startLine": 105,
        "startChar": 43,
        "endLine": 105,
        "endChar": 87
      },
      "revId": "8fa938f4e4179de079c8e687ac3deec894758065",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "df9c454c_10108386",
        "filename": "main/src/main/java/org/onap/policy/pap/main/comm/PdpStatusMessageHandler.java",
        "patchSetId": 7
      },
      "lineNbr": 54,
      "author": {
        "id": 811
      },
      "writtenOn": "2021-02-16T19:00:52Z",
      "side": 1,
      "message": "with the introduction of SessionData, this class can be revised, replacing:\n- calls to databaseProvider.getFilteredPdpGroups() with calls to data.getGroup(); and\n- calls to databaseProvider.updatePdpSubGroup() with calls to data.update() and data.updateDb()\n\nfor that matter, probably a lot of the places where databaseProvider is being passed, databaseProvider could be replaced by the SessionData object",
      "revId": "8fa938f4e4179de079c8e687ac3deec894758065",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6282430c_709ef2dd",
        "filename": "main/src/main/java/org/onap/policy/pap/main/comm/PdpStatusMessageHandler.java",
        "patchSetId": 7
      },
      "lineNbr": 138,
      "author": {
        "id": 811
      },
      "writtenOn": "2021-02-16T19:00:52Z",
      "side": 1,
      "message": "won\u0027t this cause an NPE?",
      "range": {
        "startLine": 138,
        "startChar": 20,
        "endLine": 138,
        "endChar": 24
      },
      "revId": "8fa938f4e4179de079c8e687ac3deec894758065",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "73528bde_a5032dd5",
        "filename": "main/src/main/java/org/onap/policy/pap/main/comm/PdpStatusMessageHandler.java",
        "patchSetId": 7
      },
      "lineNbr": 290,
      "author": {
        "id": 4903
      },
      "writtenOn": "2021-02-17T13:47:15Z",
      "side": 1,
      "message": "This would be always considered as registration flow as per the changes in PdpMessageGenerator. But this won\u0027t be a problem once Jim\u0027s comments are implemented. Better to find policies to deploy/undeploy in this class.",
      "range": {
        "startLine": 290,
        "startChar": 102,
        "endLine": 290,
        "endChar": 106
      },
      "revId": "8fa938f4e4179de079c8e687ac3deec894758065",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "64c16d75_1d0b8950",
        "filename": "main/src/main/java/org/onap/policy/pap/main/rest/PdpGroupStateChangeProvider.java",
        "patchSetId": 7
      },
      "lineNbr": 121,
      "author": {
        "id": 3239
      },
      "writtenOn": "2021-02-19T17:25:29Z",
      "side": 1,
      "message": "Currently during ACTIVE to PASSIVE state change we are sending the full list of policies to the PDP via PDP_UPDATE message. And with delta changes, we still continue to send the full list under policiesToBeDeployed list. Which makes an extra operation for the PDPs. Ideally, we must send full list under policiesToBeUndeployed in this case, so that PDPs undeploy the policy and then gracefully move to PASSIVE.\nThis also brings another discussion of how the PDPs are handling PASSIVE state. Do they lose all their policies, keep them deployed but don\u0027t consume events, etc. And also need to revisit our definitions of states in PDPs.\nWe can skip it for the scope of this delta work. As the behaviour remains same like before.\nBut good to have a JIRA opened for Istanbul release to streamline the states in PDP engine.\nThoughts?",
      "range": {
        "startLine": 121,
        "startChar": 24,
        "endLine": 121,
        "endChar": 46
      },
      "revId": "8fa938f4e4179de079c8e687ac3deec894758065",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c32fd6da_84da293b",
        "filename": "main/src/main/java/org/onap/policy/pap/main/rest/PdpGroupStateChangeProvider.java",
        "patchSetId": 7
      },
      "lineNbr": 122,
      "author": {
        "id": 811
      },
      "writtenOn": "2021-02-16T19:00:52Z",
      "side": 1,
      "message": "will throw an NPE",
      "range": {
        "startLine": 122,
        "startChar": 32,
        "endLine": 122,
        "endChar": 36
      },
      "revId": "8fa938f4e4179de079c8e687ac3deec894758065",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    }
  ]
}