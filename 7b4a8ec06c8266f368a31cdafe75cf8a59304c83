{
  "comments": [
    {
      "key": {
        "uuid": "d0e2d16a_4bf4570f",
        "filename": "main/src/main/java/org/onap/policy/pap/main/comm/PdpStatisticsListener.java",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 4903
      },
      "writtenOn": "2021-07-01T08:49:24Z",
      "side": 1,
      "message": "So there will be 2 listeners in PAP polling same heartbeat messages, where this 1 is specifically for heartbeats?",
      "range": {
        "startLine": 44,
        "startChar": 13,
        "endLine": 44,
        "endChar": 35
      },
      "revId": "7b4a8ec06c8266f368a31cdafe75cf8a59304c83",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89c26e7f_79dd97db",
        "filename": "main/src/main/java/org/onap/policy/pap/main/comm/PdpStatisticsListener.java",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 4903
      },
      "writtenOn": "2021-07-01T08:50:02Z",
      "side": 1,
      "message": "*specifically for statistics?",
      "parentUuid": "d0e2d16a_4bf4570f",
      "range": {
        "startLine": 44,
        "startChar": 13,
        "endLine": 44,
        "endChar": 35
      },
      "revId": "7b4a8ec06c8266f368a31cdafe75cf8a59304c83",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c501f90a_116c1281",
        "filename": "main/src/main/java/org/onap/policy/pap/main/comm/PdpStatisticsListener.java",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 4903
      },
      "writtenOn": "2021-07-01T08:56:59Z",
      "side": 1,
      "message": "Or is it going to read from POLICY-STATISTICS topic, where saving statistics to db is done by this class, and the existing code deals with sending statistics to this new topic? But in that case, maybe can\u0027t we just send PdpStatistics into the new topic instead of the whole PdpStatus?\nSorry I am assuming things here. Maybe I will get more idea when I see the upcoming reviews you mentioned..",
      "parentUuid": "89c26e7f_79dd97db",
      "range": {
        "startLine": 44,
        "startChar": 13,
        "endLine": 44,
        "endChar": 35
      },
      "revId": "7b4a8ec06c8266f368a31cdafe75cf8a59304c83",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4a48db59_793abc0f",
        "filename": "main/src/main/java/org/onap/policy/pap/main/comm/PdpStatisticsListener.java",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 811
      },
      "writtenOn": "2021-07-01T12:56:27Z",
      "side": 1,
      "message": "Should become clear in the next review.\n\nThere will be two listeners polling the same topic for the same PdpStatus messages.  The actual (i.e., effective) topic will be the same for both, POLICY-PDP-PAP, but in the config file, one will be called POLICY-PDP-PAP, as is currently the case, and the other will be called POLICY-STATISTICS.  The consumerGroup for the first will be continue to be unique, while the consumerGroup for the second will be a constant used by all PAPs (i.e., \"policy-pap\").  Both listeners will monitor the same message flow and no additional messages will be published to the topic than are already being published.\n\nThe existing PdpHeartbeatListener will no longer deal with the statistics contained within the PdpStatus; this new listener will take over that job.  In addition, the saveStatisticsInDb flag will go away.  Instead, the presence or absence of the POLICY-STATISTICS item within the config.json will determine whether or not statistics are saved to the DB - if it\u0027s in the config.json, then it will be saved, otherwise, it will not.\n\nOne question I have: is there a way in helm charts to specify a UUID to be injected into the consumerInstance of the config.json?  If not, then policy-endpoints will have to include a little more logic to make that happen.  (Actually, I may add that logic anyway: if consumerGroup is specified in the config.json, but consumerInstance is not, then it generates a UUID for the instance.)",
      "parentUuid": "c501f90a_116c1281",
      "range": {
        "startLine": 44,
        "startChar": 13,
        "endLine": 44,
        "endChar": 35
      },
      "revId": "7b4a8ec06c8266f368a31cdafe75cf8a59304c83",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eb0c7328_ec820a55",
        "filename": "main/src/main/java/org/onap/policy/pap/main/comm/PdpStatisticsListener.java",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 4903
      },
      "writtenOn": "2021-07-01T13:57:49Z",
      "side": 1,
      "message": "Seems possible.\n{{- $pap-topic-uuid :\u003d uuidv4 -}}  will generate a random uuid, put this into one of the yaml and then use $pap-topic-uuid in the config file.",
      "parentUuid": "4a48db59_793abc0f",
      "range": {
        "startLine": 44,
        "startChar": 13,
        "endLine": 44,
        "endChar": 35
      },
      "revId": "7b4a8ec06c8266f368a31cdafe75cf8a59304c83",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "16b788bc_c6f030cf",
        "filename": "main/src/main/java/org/onap/policy/pap/main/comm/PdpStatisticsListener.java",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 477
      },
      "writtenOn": "2021-07-01T14:43:50Z",
      "side": 1,
      "message": "I don\u0027t remember the fine details, and you probably already checked, but have to ask, did you test that the 2 endpoints combination work as you intend here?   Since there will be 2 connections from the same host to the dmaap server for the server, I am wondering if the fetchTimeout needs to be tweaked in anyway, or it wouldn\u0027t matter provided the consumerInstance is unique?",
      "parentUuid": "eb0c7328_ec820a55",
      "range": {
        "startLine": 44,
        "startChar": 13,
        "endLine": 44,
        "endChar": 35
      },
      "revId": "7b4a8ec06c8266f368a31cdafe75cf8a59304c83",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    }
  ]
}